---
title: "Parse the wordy geographical descriptors"
output: html_document
---

```{r}
library(magrittr)
library(dplyr)
library(readr)
library(knitr)

# Original CSV file from 
url <- "http://www.abs.gov.au/websitedbs/censushome.nsf/home/datapacksdetails/$file/2011Census_geog_desc_1st_and_2nd_release.csv"
filename <- basename(url)

if (!file.exists(filename)) {
  download.file(url, filename, quiet = TRUE)
}

geog.desc <- readr::read_csv("2011Census_geog_desc_1st_and_2nd_release.csv")

# For some reason there are some empty columns in the data set. Ignore them.
geog.desc <- geog.desc[, 1:5]

# Some renaming.
geog.desc %<>% select(level=Level, region_id=Code, label=Label, area=`Area sqkm`) %>%
    mutate(level     = as.factor(level))

save(geog.desc, file='../data/geog.desc.rda', compress='bzip2')

knitr::kable(head(geog.desc, 20), caption="Statistical Area Information")
```

